---
layout: single
title:  "Stream"
categories: TIL
tag: [Stream, Parallel Stream]
author_profile: false
toc: true
toc_label: "TIL"
toc_sticky: true
# toc_icon: "heart"  # corresponding Font Awesome icon name (without fa prefix)
---
<br><br><br>

# Stream
**Collection, Array** 등의 데이터 소스를 함수형 프로그래밍의 **Stream** 형태로 다룰 수 있도록 지원하는 **API**
<br>
Stream 은 대표적으로 Collection 데이터를 처리하거나 I/O 처리에 스트리밍 방식을 사용한다.
<br>
데이터의 필터링, 매핑, 정렬, 집계 등과 **대량의 데이터를 처리할 때 효과적으로 사용할 수 있다.**

* **Stream의 스트리밍 방식**
    * 데이터를 작은 블록 단위로 분할하여 처리하는 방식 - 대용량 데이터 처리에 효율적
        * 멀티코어 CPU 에서 데이터를 빠른속도로 병렬처리 하는데 용이
        * 네트워크 통신에서도 분할하여 전송하고 동시에 처리하기 때문에 용이
        * 데이터를 끊어서 전송할 수 있어서, 데이터 전송이 중단되거나 끊어졌을 경우 용이
* **지연처리**
    * 데이터소스에서 **Stream** 을 생성하면, 중간 연산들은 데이터 처리가 시작되기 전까지 수행되지 않는다.
    * 불필요한 데이터 처리를 줄이고, 성능향상에 도움이 될 수 있다.
* **병렬처리**
    * 데이터 처리과정에서 데이터를 분할하여 병렬로 처리할 수 있어 대용량 데이터 처리에 적합
    * 데이터가 분할되어 처리되기 때문에, 순서가 보장되지 않는다.

<br>

**순서**

---
1. **Stream 생성**
    * Collection, Array 등의 다양한 데이터 소스를 이용해 **Stream** 을 생성한다.
        * Collection.stream(), Arrays.stream() 등
2. **중간 연산**
    * **Stream** 의 요소를 변환하거나 필터링하는 등의 작업을 수행
        * filter, map, flatMap, distinct, sorted, limit, skip 등
3. **최종 연산**
    * **Stream** 의 요소를 처리하고 결과를 반환합니다.
        * forEach, toArray, reduce, collect, min, max, count 등

<br>

**trade-off**

---
<br>
**장점**
* 원본데이터가 변경되지 않는 **불변성**
* 내부적으로 **병렬 처리** 가 가능하도록 구현되어 있어, **멀티코어 CPU에서 빠른 속도로 데이터 처리 가능**
* 중간연산과 최종연산의 분리
* 데이터를 한 번에 다 읽어들이는 것이 아니라, 필요한 데이터만 읽어들이므로 **메모리 사용량 최적화**


<br>

**단점**
* **상태** 가 없는 연산만을 지원
* 데이터를 스트리밍 방식으로 처리하기 때문에, **작은 데이터셋에선 for / while 문보다 비효율적이다.**
* 제네릭 타입을 사용하여 데이터를 처리하기 때문에, 타입추론이 어려울 수 있다.
* 내부적으로 복잡한 작업을 처리하기 위해 많은 객체를 생성하므로, **런타임 오버헤드** 가 발생할 수 있다.


<br>
<br>
<br>
<br>

# Parallel Stream

## 1

## 2

<br>
<br>
<br>
<br>

