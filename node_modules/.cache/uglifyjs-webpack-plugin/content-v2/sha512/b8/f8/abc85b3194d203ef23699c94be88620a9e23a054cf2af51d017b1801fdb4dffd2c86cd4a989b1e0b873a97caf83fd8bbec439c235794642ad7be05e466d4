{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{173:function(t,s,n){t.exports=n.p+\"assets/img/1.a3f11f6a.png\"},204:function(t,s,n){\"use strict\";n.r(s);var a=[function(){var t=this.$createElement,s=this._self._c||t;return s(\"h1\",{attrs:{id:\"장고-settings-파일-설정-변수-분리\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#장고-settings-파일-설정-변수-분리\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" 장고 settings 파일 & 설정 변수 분리\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[s(\"code\",[this._v(\"Two scoops of django\")]),this._v(\" 책의 5장, 'settings와 requirements 파일'을 보고 개인 프로젝트에 두 가지를 리팩토링해야겠다는 생각이 들었다.\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"ol\",[s(\"li\",[this._v(\"비밀 값(e.g. OAuth 토큰) 코드에서 분리\")]),s(\"li\",[this._v(\"환경별로 settings 파일 분리\")])])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"h2\",{attrs:{id:\"비밀-값-코드에서-분리시키기\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#비밀-값-코드에서-분리시키기\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" 비밀 값 코드에서 분리시키기\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[s(\"code\",[this._v(\"secret.json\")]),this._v(\"이란 비밀 값들을 저장하는 파일을 만든다. 나는 장고 \"),s(\"code\",[this._v(\"SECRET_KEY\")]),this._v(\"와 facebook OAuth 키 값들을 넣었다. 이 파일은 코드 저장소에 저장되면 안되기에, \"),s(\"code\",[this._v(\".gitignore\")]),this._v(\"에 추가해준다.\")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n(\"div\",{staticClass:\"language-json extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-json\"}},[n(\"code\",[n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  \"),n(\"span\",{attrs:{class:\"token property\"}},[t._v('\"SECRET_KEY\"')]),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"m-4#rp68ffwi어쩌구\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n  \"),n(\"span\",{attrs:{class:\"token property\"}},[t._v('\"SOCIAL_AUTH_FACEBOOK_KEY\"')]),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"12312345678\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n  \"),n(\"span\",{attrs:{class:\"token property\"}},[t._v('\"SOCIAL_AUTH_FACEBOOK_SECRET\"')]),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"asdf123asdf123\"')]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n(\"div\",{staticClass:\"language-python extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-python\"}},[n(\"code\",[n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"import\")]),t._v(\" json\\n\\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"from\")]),t._v(\" django\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"core\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"exceptions \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"import\")]),t._v(\" ImproperlyConfigured\\n\\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"with\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token builtin\"}},[t._v(\"open\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"secrets.json\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"as\")]),t._v(\" f\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n    secrets \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" json\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"loads\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"f\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"read\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"# Keep secret keys in secrets.json\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"def\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"get_secret\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"setting\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" secrets\"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\"secrets\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"try\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n        \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"return\")]),t._v(\" secrets\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"setting\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"except\")]),t._v(\" KeyError\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n        error_msg \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"Set the {0} environment variable\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token builtin\"}},[t._v(\"format\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"setting\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n        \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"raise\")]),t._v(\" ImproperlyConfigured\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"error_msg\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\\nSECRET_KEY \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" get_secret\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"SECRET_KEY\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"h2\",{attrs:{id:\"환경별로-settings-파일-분리\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#환경별로-settings-파일-분리\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" 환경별로 settings 파일 분리\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[this._v(\"이것도 어렵지 않다.\\n프로젝트 폴더 내의 메인 앱 내부(기존에 settings.py가 있던 곳)에 \"),s(\"code\",[this._v(\"/settings\")]),this._v(\" 폴더를 만들어준다.\\n나는 기본(base), 로컬(local), 운영 서버(production) 세 개로 분리했다. \"),s(\"code\",[this._v(\"__init__.py\")]),this._v(\"도 추가해주어야 한다(settings의 app에 추가할 필요는 없다).\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[this._v(\"project_name\\n    settings\\n        __init__.py\\n        base.py\\n        local.py\\n        production.py\\n\")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"p\",[s(\"code\",[this._v(\"base.py\")]),this._v(\"에는 기존에 \"),s(\"code\",[this._v(\"settings.py\")]),this._v(\"에 있던 것들을 옮겨주면 된다.\\n\"),s(\"code\",[this._v(\"local.py\")]),this._v(\"에선 base를 상속받아준 다음, 개발 환경에서 원하는 세팅들을 추가해주면 된다.\")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n(\"div\",{staticClass:\"language-python extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-python\"}},[n(\"code\",[n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"from\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"base \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"import\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\"\\n\\nDEBUG \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token boolean\"}},[t._v(\"True\")]),t._v(\"\\n\")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[this._v(\"# settings/local.py세팅 파일로 셸 시작 \\npython manage.py shell --settings=twoscoops.settings.local\\n\\n# settings/local.py세팅 파일로 서버 구동\\npython manage.py runserver --settings=twoscoops.settings.local\\n\")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n(\"div\",{staticClass:\"language-python extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-python\"}},[n(\"code\",[t._v(\"os\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"environ\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"setdefault\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"DJANGO_SETTINGS_MODULE\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"project_name.settings.local\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[this._v(\"./manage.py migrate\\n\")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"h2\",{attrs:{id:\"pycharm에서-settings별로-서버-실행-변수-바꾸기\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#pycharm에서-settings별로-서버-실행-변수-바꾸기\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" Pycharm에서 settings별로 서버 실행 변수 바꾸기\")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"p\",[a(\"img\",{attrs:{src:n(173),alt:\"Pycharm Settings\",title:\"Pycharm Settings\"}}),t._v(\"\\n일단 \"),a(\"code\",[t._v(\"Run > Edit configurations\")]),t._v(\"에 좌측 \"),a(\"code\",[t._v(\"+\")]),t._v(\"버튼으로 장고 서버를 추가해준다.\\n원하는 이름을 지정하고,\\n\"),a(\"code\",[t._v(\"Environment variables\")]),t._v(\" 옆에 \"),a(\"code\",[t._v(\"...\")]),t._v(\"을 눌러 \"),a(\"code\",[t._v(\"DJANGO_SETTINGS_MODULE\")]),t._v(\"이란 key로 원하는 세팅 파일 경로를 잡아준다. 나같은 경우엔 \"),a(\"code\",[t._v(\"cart.settings.local\")]),t._v(\"을 추가해주었다.\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"h2\",{attrs:{id:\"refer\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#refer\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" Refer\")])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"ul\",[s(\"li\",[this._v(\"Two scoops of django\")]),s(\"li\",[this._v(\"https://dayone.me/20Tcz1k\")])])}],e=n(0),r=Object(e.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n(\"div\",{staticClass:\"content\"},[t._m(0),t._m(1),t._m(2),n(\"p\",[t._v(\"제일 급한 OAuth 토큰부터 분리해보겠다.\\n책에선 환경변수를 이용하는 것을 추천했지만, 나는 차선책인 'json'파일 만드는 방법을 선택했다.\\n아직 shell에 익숙하지 않은 것도 있고, 다른 개발자와 json으로 공유하는게 한 눈에 보기 편할 것 같아서다.\")]),t._m(3),t._m(4),t._m(5),n(\"p\",[t._v(\"이는 settings파일에서 다음과 같이 불러올 수 있다.\")]),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),n(\"p\",[t._v(\"실행은 다음과 같이 하면 되는데,\")]),t._m(12),n(\"p\",[t._v(\"그럼 \"),n(\"code\",[t._v(\"ImproperlyConfigured: The SECRET_KEY setting must not be empty\")]),t._v(\" 에러가 날 것이다. 찾아보니 이렇게 바꾼 후에는 \"),n(\"code\",[t._v(\"project_name/wsgi.py\")]),t._v(\"와 \"),n(\"code\",[t._v(\"manage.py\")]),t._v(\"에 기본 구동 세팅을 설정해줘야 한단다.\"),n(\"a\",{attrs:{href:\"http://stackoverflow.com/questions/19128540/django-improperlyconfigured-the-secret-key-setting-must-not-be-empty\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"참고 링크\"),n(\"OutboundLink\")],1)]),t._m(13),n(\"p\",[t._v(\"이렇게 바꾸면, 한번 migrate를 해주어야 한다. (기존 db가 날아간다 ㅠㅠ)\")]),t._m(14),t._m(15),t._m(16),n(\"p\",[t._v(\"virtualenv로 의존성 관리를 하고 있다면, 하단의 \"),n(\"code\",[t._v(\"Python interpreter\")]),t._v(\"도 알맞은 것으로 바꿔주어야 한다. 원하는 것이 없으면 \"),n(\"code\",[t._v(\"Pycharm > Preferences > Project Interpreter\")]),t._v(\"에서 추가해준다. \"),n(\"a\",{attrs:{href:\"https://www.jetbrains.com/help/pycharm/2016.1/configuring-python-interpreter-for-a-project.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"참고\"),n(\"OutboundLink\")],1)]),t._m(17),t._m(18)])},a,!1,null,null,null);s.default=r.exports}}]);","extractedComments":[]}